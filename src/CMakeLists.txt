project(liblua)
file(GLOB LIBLUA_H *.h)
aux_source_directory(. LIBLUA_C)
list(REMOVE_ITEM LIBLUA_C ./luac.c ./lua.c)
message(STATUS ${LIBLUA_C})
include_directories(.)
ADD_DEFINITIONS(-DLUA_BUILD_AS_DLL)
add_library(liblua SHARED ${LIBLUA_H} ${LIBLUA_C})
set_target_properties(liblua PROPERTIES ARCHIVE_OUTPUT_DIRECTORY_DEBUG ../../bin)
set_target_properties(liblua PROPERTIES RUNTIME_OUTPUT_DIRECTORY_DEBUG ../../bin)

project(lua)
set(LUA_C ./lua.c)
message(STATUS ${LUA_C})
include_directories(.)
add_executable(lua ${LUA_C})
set_target_properties(lua PROPERTIES ARCHIVE_OUTPUT_DIRECTORY_DEBUG ../../bin)
set_target_properties(lua PROPERTIES RUNTIME_OUTPUT_DIRECTORY_DEBUG ../../bin)
target_link_libraries(lua ../../bin/liblua)
ADD_DEPENDENCIES(lua liblua)
