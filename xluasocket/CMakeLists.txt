project(xluasocket)
SET(XLUASOCKET_H ./xluaconf.h ./write_buffer.h ./ringbuf.h ./protoc.h)
SET(XLUASOCKET_C ./lxluasocket.c ./ringbuf.c ./write_buffer.c)
message(STATUS ${XLUASOCKET_C})
include_directories(.)
include_directories(../src)
ADD_DEFINITIONS(-DLUA_BUILD_AS_DLL)
add_library(xluasocket SHARED ${XLUASOCKET_H} ${XLUASOCKET_C})
set_target_properties(xluasocket PROPERTIES ARCHIVE_OUTPUT_DIRECTORY_DEBUG ../../bin)
set_target_properties(xluasocket PROPERTIES RUNTIME_OUTPUT_DIRECTORY_DEBUG ../../bin)
target_link_libraries(xluasocket ../../bin/liblua)
ADD_DEPENDENCIES(xluasocket lua)

project(ringbuf_unittest)
SET(RINGBUG_UNITTEST_H ./ringbuf.h ./write_buffer.h)
set(RINGBUG_UNITTEST_C ./ringbuf_unittest.cc ./ringbuf.c ./write_buffer.c)
message(STATUS ${RINGBUG_UNITTEST_C})
include_directories(.)
include_directories(../googletest/include)
add_executable(ringbuf_unittest ${RINGBUG_UNITTEST_H} ${RINGBUG_UNITTEST_C})
set_target_properties(ringbuf_unittest PROPERTIES ARCHIVE_OUTPUT_DIRECTORY_DEBUG ../../bin)
set_target_properties(ringbuf_unittest PROPERTIES RUNTIME_OUTPUT_DIRECTORY_DEBUG ../../bin)
target_link_libraries(ringbuf_unittest ../../googletest/Debug/gtestd ../../googletest/Debug/gtest_maind)

